import configparser
import os
from configparser import ConfigParser

from zerooo.core.log import LOGGER


class Config:

    def __init__(self):
        self.configfile = 'config.ini'
        self.config = ConfigParser()

    def create_config(self):
        try:
            self.config.add_section('hunter')
            self.config.add_section('fofa')
            self.config.set('hunter', 'api-key', '')
            self.config.set('fofa', 'email', '')
            self.config.set('fofa', 'api-key', '')
            if not os.path.exists(self.configfile):
                with open(self.configfile, 'w') as f:
                    self.config.write(f)
                    LOGGER.success(f'配置文件写入完成 (Config file write complete): {self.configfile}')
        except configparser.DuplicateSectionError:
            pass

    def read_config(self, apiname, value):
        self.config.read(self.configfile)
        # return self.config.options(apiname)
        return self.config.get(apiname, value)


config = Config()
